<!DOCTYPE html>
<html lang="ua">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NFT Battle Arena - Play2Earn гра в Telegram</title>
    <meta name="description" content="Отримай свій перший NFT, бійся на арені з суперниками та збирай унікальну колекцію. Це не просто гра – це битва за нагороди, престиж і справжню силу!">
    
    <style>
/* NFT Battle Arena - iOS 18 Dark Glass UI Theme */
:root {
    --bg-primary: #000000;
    --bg-secondary: #0a0a0a;
    --bg-tertiary: #1a1a1a;
    --glass-bg: rgba(28, 28, 30, 0.68);
    --glass-bg-strong: rgba(28, 28, 30, 0.88);
    --glass-border: rgba(255, 255, 255, 0.08);
    --glass-border-strong: rgba(255, 255, 255, 0.15);
    --text-primary: #ffffff;
    --text-secondary: rgba(255, 255, 255, 0.8);
    --text-tertiary: rgba(255, 255, 255, 0.55);
    --text-quaternary: rgba(255, 255, 255, 0.3);
    --accent-primary: #007aff;
    --accent-secondary: #34c759;
    --accent-danger: #ff3b30;
    --accent-warning: #ff9500;
    --blur-light: blur(20px);
    --blur-medium: blur(40px);
    --blur-heavy: blur(60px);
    --shadow-glass: 0 8px 32px rgba(0, 0, 0, 0.37);
    --shadow-elevated: 0 12px 48px rgba(0, 0, 0, 0.5);
    --radius-xs: 0.375rem;
    --radius-sm: 0.5rem;
    --radius-md: 0.75rem;
    --radius-lg: 1rem;
    --radius-xl: 1.25rem;
    --radius-2xl: 1.5rem;
    --radius-3xl: 2rem;
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

html, body {
    max-width: 100vw;
    overflow-x: hidden;
    /* Ensure no margin/padding that could cause border issues */
    margin: 0;
    padding: 0;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Helvetica Neue', Arial, sans-serif;
    background: var(--bg-primary);
    color: var(--text-primary);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    line-height: 1.6;
}

.App {
    background: var(--bg-primary);
    min-height: 100vh;
    color: var(--text-primary);
    max-width: 100vw;
    overflow-x: hidden;
}

/* Glass Button System */
.glass-button-primary {
    background: var(--glass-bg-strong);
    backdrop-filter: var(--blur-light);
    -webkit-backdrop-filter: var(--blur-light);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-2xl);
    color: var(--text-primary);
    font-weight: 600;
    font-size: 1rem;
    padding: 1rem 2rem;
    min-height: 48px;
    transition: all 0.2s ease;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    box-shadow: var(--shadow-glass);
    text-decoration: none;
}

.glass-button-primary:hover {
    background: var(--glass-bg-strong);
    border-color: var(--glass-border-strong);
    transform: translateY(-2px);
    box-shadow: var(--shadow-elevated);
}

.glass-button-accent {
    background: var(--accent-primary);
    border: none;
    border-radius: var(--radius-2xl);
    color: white;
    font-weight: 600;
    font-size: 1rem;
    padding: 1rem 2rem;
    min-height: 48px;
    transition: all 0.2s ease;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    box-shadow: var(--shadow-glass);
    text-decoration: none;
}

.glass-button-accent:hover {
    background: #0051d5;
    transform: translateY(-2px);
    box-shadow: var(--shadow-elevated);
}

/* Glass Card System */
.glass-card {
    background: var(--glass-bg);
    backdrop-filter: var(--blur-light);
    -webkit-backdrop-filter: var(--blur-light);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-2xl);
    box-shadow: var(--shadow-glass);
    transition: all 0.3s ease;
}

.glass-card:hover {
    background: var(--glass-bg-strong);
    border-color: var(--glass-border-strong);
    transform: translateY(-4px);
    box-shadow: var(--shadow-elevated);
}

.glass-card-strong {
    background: var(--glass-bg-strong);
    backdrop-filter: var(--blur-medium);
    -webkit-backdrop-filter: var(--blur-medium);
    border: 1px solid var(--glass-border-strong);
    border-radius: var(--radius-2xl);
    box-shadow: var(--shadow-elevated);
}

/* Navigation - SINGLE TOP BORDER */
.glass-nav {
    background: var(--glass-bg);
    backdrop-filter: var(--blur-medium);
    -webkit-backdrop-filter: var(--blur-medium);
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    width: 100%;
    z-index: 1000;
    transition: all 0.3s ease;
    box-sizing: border-box;
    max-width: 100vw;
    overflow-x: hidden;
    /* Single thin border at the bottom */
    border-bottom: 1px solid var(--glass-border);
    /* Ensure no other borders */
    border-top: none;
    border-left: none;
    border-right: none;
}

.glass-nav.scrolled {
    background: var(--glass-bg-strong);
    backdrop-filter: var(--blur-heavy);
    -webkit-backdrop-filter: var(--blur-heavy);
}

/* Typography */
.text-display {
    font-size: clamp(2rem, 5vw, 4rem);
    font-weight: 700;
    line-height: 1.1;
    letter-spacing: -0.02em;
    color: var(--text-primary);
}

.text-title {
    font-size: clamp(1.5rem, 4vw, 2.5rem);
    font-weight: 600;
    line-height: 1.2;
    color: var(--text-primary);
}

.text-headline {
    font-size: 1.25rem;
    font-weight: 600;
    line-height: 1.3;
    color: var(--text-primary);
}

.text-body {
    font-size: 1rem;
    font-weight: 400;
    line-height: 1.5;
    color: var(--text-secondary);
}

.text-caption {
    font-size: 0.875rem;
    font-weight: 500;
    line-height: 1.4;
    color: var(--text-tertiary);
}

/* Layout System */
.container-glass {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1.5rem;
}

.section-glass {
    padding: 4rem 0;
}

.grid-glass {
    display: grid;
    gap: 1.5rem;
}

.grid-glass-2 { grid-template-columns: repeat(2, 1fr); }
.grid-glass-3 { grid-template-columns: repeat(3, 1fr); }
.grid-glass-4 { grid-template-columns: repeat(4, 1fr); }

.scale-hover {
    transition: transform 0.2s ease;
}

.scale-hover:hover {
    transform: scale(1.02);
}

/* Page System */
.page {
    display: none;
    min-height: 100vh;
    padding-top: 100px;
}

.page.active {
    display: block;
}

/* Navigation styles */
.nav-content {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1rem 0;
}

.nav-logo {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    cursor: pointer;
    color: var(--text-primary);
    text-decoration: none;
}

.nav-logo-icon {
    background: var(--glass-bg);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-lg);
    padding: 0.5rem;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--accent-primary);
}

.nav-menu {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    list-style: none;
}

.nav-item {
    padding: 0.5rem 1rem;
    border-radius: var(--radius-xl);
    cursor: pointer;
    transition: all 0.2s ease;
    color: var(--text-tertiary);
}

.nav-item:hover {
    color: var(--text-primary);
    background: rgba(255, 255, 255, 0.05);
}

.nav-item.active {
    background: rgba(255, 255, 255, 0.1);
    color: var(--text-primary);
}

.nav-right {
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.mobile-menu-toggle {
    display: none;
    background: none;
    border: none;
    color: var(--text-primary);
    cursor: pointer;
    padding: 0.5rem;
    border-radius: var(--radius-xl);
    transition: background 0.2s ease;
}

.mobile-menu-toggle:hover {
    background: rgba(255, 255, 255, 0.1);
}

/* Language Switcher */
.language-switcher {
    position: relative;
    display: inline-block;
}

.language-trigger {
    background: var(--glass-bg);
    border: 1px solid var(--glass-border);
    border-radius: var(--radius-xl);
    padding: 0.5rem 0.75rem;
    color: var(--text-primary);
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.875rem;
    transition: all 0.2s ease;
}

.language-trigger:hover {
    background: var(--glass-bg-strong);
    border-color: var(--glass-border-strong);
}

.language-dropdown {
    position: absolute;
    top: 100%;
    right: 0;
    margin-top: 0.25rem;
    background: var(--glass-bg-strong);
    backdrop-filter: var(--blur-medium);
    border: 1px solid var(--glass-border-strong);
    border-radius: var(--radius-xl);
    min-width: 140px;
    box-shadow: var(--shadow-elevated);
    opacity: 0;
    visibility: hidden;
    transform: translateY(-10px);
    transition: all 0.2s ease;
    z-index: 1001;
}

.language-dropdown.open {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
}

.language-option {
    padding: 0.75rem;
    cursor: pointer;
    transition: background 0.2s ease;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--text-primary);
    border-radius: var(--radius-lg);
    margin: 0.25rem;
}

.language-option:hover {
    background: rgba(255, 255, 255, 0.1);
}

/* Tabs System */
.tabs-container {
    width: 100%;
}

.tabs-list {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    background: var(--glass-bg);
    border-radius: var(--radius-2xl);
    padding: 0.25rem;
    margin-bottom: 2rem;
}

.tab-trigger {
    background: transparent;
    border: none;
    color: var(--text-tertiary);
    padding: 0.75rem 1rem;
    border-radius: var(--radius-xl);
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    font-size: 0.875rem;
}

.tab-trigger:hover {
    color: var(--text-primary);
    background: rgba(255, 255, 255, 0.05);
}

.tab-trigger.active {
    color: var(--text-primary);
    background: var(--glass-bg-strong);
}

.tab-content {
    display: none;
}

.tab-content.active {
    display: block;
}

/* Battle Demo Styles */
.battle-arena {
    position: relative;
}

.hp-bar-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 2rem;
    margin-bottom: 2rem;
}

.hp-section {
    flex: 1;
}

.hp-info {
    display: flex;
    justify-content: space-between;
    margin-bottom: 0.5rem;
    color: var(--text-caption);
    font-weight: 600;
}

.hp-bar {
    height: 12px;
    background: rgba(0, 0, 0, 0.6);
    border-radius: var(--radius-xl);
    overflow: hidden;
}

.hp-fill {
    height: 100%;
    background: linear-gradient(to right, #ef4444, #22c55e);
    transition: width 0.5s ease;
    border-radius: var(--radius-xl);
}

.energy-bar {
    height: 8px;
    background: rgba(0, 0, 0, 0.6);
    border-radius: var(--radius-xl);
    overflow: hidden;
    margin-top: 0.5rem;
}

.energy-fill {
    height: 100%;
    background: #eab308;
    transition: width 0.5s ease;
    border-radius: var(--radius-xl);
}

.turn-indicator {
    text-align: center;
    padding: 0 1.5rem;
}

.turn-icon {
    font-size: 3rem;
    margin-bottom: 0.5rem;
}

.characters-container {
    display: flex;
    justify-content: space-between;
    align-items: end;
    padding: 3rem 2rem;
}

.character {
    transition: transform 0.3s ease;
    text-align: center;
}

.character.active {
    transform: scale(1.1);
}

.character-avatar {
    width: 96px;
    height: 128px;
    border-radius: var(--radius-2xl);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 4rem;
    margin-bottom: 0.5rem;
}

.player-avatar {
    background: linear-gradient(to bottom, #3b82f6, #1d4ed8);
}

.enemy-avatar {
    background: linear-gradient(to bottom, #ef4444, #dc2626);
}

.vs-indicator {
    text-align: center;
}

.vs-icon {
    font-size: 6rem;
    margin-bottom: 0.5rem;
}

.battle-result {
    position: absolute;
    inset: 0;
    background: var(--glass-bg-strong);
    backdrop-filter: var(--blur-heavy);
    border-radius: var(--radius-2xl);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10;
}

.battle-log {
    height: 128px;
    overflow-y: auto;
    padding: 1rem;
}

.log-entry {
    margin-bottom: 0.5rem;
    color: var(--text-body);
}

/* Utility Classes */
.hidden { display: none; }
.flex { display: flex; }
.items-center { align-items: center; }
.justify-center { justify-content: center; }
.justify-between { justify-content: space-between; }
.gap-2 { gap: 0.5rem; }
.gap-4 { gap: 1rem; }
.text-center { text-align: center; }
.mb-4 { margin-bottom: 1rem; }
.mb-8 { margin-bottom: 2rem; }
.mb-12 { margin-bottom: 3rem; }
.mb-16 { margin-bottom: 4rem; }
.mt-4 { margin-top: 1rem; }
.mt-16 { margin-top: 4rem; }
.p-4 { padding: 1rem; }
.p-6 { padding: 1.5rem; }
.p-8 { padding: 2rem; }
.p-12 { padding: 3rem; }

.space-y-4 > * + * { margin-top: 1rem; }
.space-y-6 > * + * { margin-top: 1.5rem; }
.space-y-8 > * + * { margin-top: 2rem; }

/* Mobile Responsive - FIXED BORDER ISSUE */
@media (max-width: 1024px) {
    .nav-menu { display: none; }
    .mobile-menu-toggle { display: block; }
}

@media (max-width: 768px) {
    .glass-nav {
        padding: 0.5rem 1rem;
        /* Border is already defined in main .glass-nav rule - no duplication */
        box-sizing: border-box;
        width: 100vw;
        max-width: 100%;
        overflow-x: hidden;
    }
    
    .container-glass {
        padding: 0 1rem;
        max-width: 100%;
        overflow-x: hidden;
    }
    
    .grid-glass-2,
    .grid-glass-3,
    .grid-glass-4 {
        grid-template-columns: 1fr;
    }
    
    .glass-button-primary,
    .glass-button-accent {
        width: 100%;
        min-height: 56px;
        font-size: 1.1rem;
    }
    
    .section-glass {
        padding: 2rem 0;
    }
    
    .mobile-menu {
        position: fixed;
        top: 100%;
        left: 0;
        right: 0;
        background: var(--glass-bg-strong);
        backdrop-filter: var(--blur-heavy);
        /* Mobile menu has its own top border when expanded */
        border-top: 1px solid var(--glass-border);
        border-bottom: none;
        border-left: none;
        border-right: none;
        transform: translateY(-100%);
        transition: transform 0.3s ease;
        z-index: 999;
        max-width: 100vw;
        overflow-x: hidden;
        box-sizing: border-box;
    }
    
    .mobile-menu.open {
        transform: translateY(0);
    }
}

@media (max-width: 480px) {
    .text-display { font-size: 2.5rem; }
    .text-title { font-size: 1.75rem; }
    .glass-card { border-radius: var(--radius-xl); margin-bottom: 1rem; }
    .glass-nav { 
        padding: 0.5rem 0.75rem;
        /* Ensure border consistency on small screens */
        border-bottom: 1px solid var(--glass-border);
        border-top: none;
        border-left: none;
        border-right: none;
    }
    .container-glass { padding: 0 0.75rem; }
}

/* Additional border stability rules */
@media (max-width: 320px) {
    .glass-nav {
        /* Ultra small screens - ensure single border */
        border-bottom: 1px solid var(--glass-border);
        border-top: none !important;
        border-left: none !important;
        border-right: none !important;
        width: 100vw;
        max-width: 100%;
        min-width: 0;
    }
}    </style>
</head>
<body>
    <div class="App">
        <!-- Navigation -->
        <nav class="glass-nav" id="navigation">
            <div class="container-glass">
                <div class="nav-content">
                    <!-- Logo -->
                    <a href="#" class="nav-logo" onclick="showPage('home')">
                        <div class="nav-logo-icon">🎮</div>
                        <span class="text-headline">NFT Battle Arena</span>
                    </a>

                    <!-- Desktop Menu -->
                    <ul class="nav-menu">
                        <li class="nav-item active" onclick="showPage('home')" data-page="home" data-translate="nav.home">Головна</li>
                        <li class="nav-item" onclick="showPage('game-info')" data-page="game-info" data-translate="nav.game_info">Про гру</li>
                        <li class="nav-item" onclick="window.open('marketplace.html', '_blank')" data-translate="nav.marketplace">Магазин</li>
                        <li class="nav-item" onclick="showPage('battle-demo')" data-page="battle-demo" data-translate="nav.battle_demo">Демо бою</li>
                    </ul>

                    <!-- Right Section -->
                    <div class="nav-right">
                        <!-- Language Switcher -->
                        <div class="language-switcher">
                            <div class="language-trigger" onclick="toggleLanguageDropdown()">
                                🌍 <span id="current-lang">UA</span> ▼
                            </div>
                            <div class="language-dropdown" id="language-dropdown">
                                <div class="language-option" onclick="changeLanguage('ua')">🇺🇦 Українська</div>
                                <div class="language-option" onclick="changeLanguage('en')">🇺🇸 English</div>
                                <div class="language-option" onclick="changeLanguage('pl')">🇵🇱 Polski</div>
                            </div>
                        </div>
                        
                        <a href="https://t.me/NFTBattleArenaBot" target="_blank" class="glass-button-accent hidden lg:flex" data-translate="nav.connect_telegram">Підключити Telegram</a>

                        <!-- Mobile menu button -->
                        <button class="mobile-menu-toggle" onclick="toggleMobileMenu()">☰</button>
                    </div>
                </div>

                <!-- Mobile Menu -->
                <div class="mobile-menu" id="mobile-menu">
                    <div class="glass-card mt-4 p-4 space-y-4">
                        <div class="nav-item" onclick="showPage('home'); toggleMobileMenu()" data-translate="nav.home">Головна</div>
                        <div class="nav-item" onclick="showPage('game-info'); toggleMobileMenu()" data-translate="nav.game_info">Про гру</div>
                        <div class="nav-item" onclick="window.open('marketplace.html', '_blank')" data-translate="nav.marketplace">Магазин</div>
                        <div class="nav-item" onclick="showPage('battle-demo'); toggleMobileMenu()" data-translate="nav.battle_demo">Демо бою</div>
                        
                        <a href="https://t.me/NFTBattleArenaBot" target="_blank" class="glass-button-accent" data-translate="nav.connect_telegram">Підключити Telegram</a>
                    </div>
                </div>
            </div>
        </nav>

        <main>
            <!-- HOME PAGE -->
            <div id="home" class="page active">
                <!-- Content will be loaded by JavaScript -->
            </div>

            <!-- GAME INFO PAGE -->
            <div id="game-info" class="page">
                <!-- Content will be loaded by JavaScript -->
            </div>

            <!-- BATTLE DEMO PAGE -->
            <div id="battle-demo" class="page">
                <!-- Content will be loaded by JavaScript -->
            </div>
        </main>
    </div>

    <script>
// NFT Battle Arena - Main JavaScript File

// Global variables
let currentLang = 'ua';
let currentPage = 'home';
let isScrolled = false;

// Battle game variables
let playerHP = 2000;
let enemyHP = 2400;
let playerEnergy = 0;
let enemyEnergy = 0;
let isPlaying = false;
let battleLog = [];
let currentTurn = 'player';
let gameResult = null;
let battleInterval = null;

const MAX_PLAYER_HP = 2000;
const MAX_ENEMY_HP = 2400;

// Translations object
const translations = {
    ua: {
        nav: {
            home: "Головна",
            game_info: "Про гру",
            marketplace: "Магазин",
            battle_demo: "Демо бою",
            connect_telegram: "Підключити Telegram"
        },
        hero: {
            title: "NFT Battle Arena",
            subtitle: "Play2Earn гра в Telegram Mini App",
            description: "Отримай свій перший NFT, бийся на арені з суперниками та збирай унікальну колекцію. Це не просто гра – це битва за нагороди, престиж і справжню силу!",
            play_now: "Грати зараз",
            learn_more: "Дізнатися більше",
            watch_demo: "Дивитись демо",
            start_journey: "Почати пригоду"
        },
        stats: {
            active_players: "Активних гравців",
            nft_in_game: "NFT у грі",
            battles_fought: "Боїв проведено",
            rewards_paid: "Нагород виплачено"
        },
        features: {
            free_nft_title: "Безкоштовний NFT",
            free_nft_desc: "Отримай свого першого бійця безкоштовно та почни пригоди в арені",
            epic_battles_title: "Епічні бої",
            epic_battles_desc: "Бийся проти ботів та інших гравців за нагороди та рейтинг",
            earn_bp_title: "Заробляй BP",
            earn_bp_desc: "Конвертуй свої BP поінти в реальні нагороди через Telegram Stars",
            why_choose_title: "Чому обирають NFT Battle Arena",
            why_choose_subtitle: "Унікальна комбінація NFT колекціонування, динамічних боїв та можливостей заробітку"
        },
        cta: {
            ready_title: "Готовий почати пригоду?",
            ready_subtitle: "Приєднуйся до тисяч гравців у NFT Battle Arena та почни заробляти разом з нами!",
            start_now: "Почати гру зараз",
            watch_demo: "Дивитись демо бою"
        },
        battle: {
            title: "Демо бою",
            description: "Подивіться, як виглядає бій в NFT Battle Arena",
            player_hp: "HP Гравця",
            enemy_hp: "HP Ворога",
            attack: "Атака",
            defend: "Захист",
            special: "Спец-удар",
            fight: "БІЙ!",
            you_win: "ВИ ПЕРЕМОГЛИ!",
            you_lose: "ВИ ПРОГРАЛИ!",
            draw: "НІЧИЯ!",
            start: "Почати",
            pause: "Пауза",
            reset: "Скинути",
            battle_log: "Лог бою",
            battle_not_started: "Бій ще не почався...",
            demo_info: "Це демо версія",
            demo_description: "У справжній грі ви зможете контролювати всі дії персонажа, використовувати різні NFT з унікальними здібностями та заробляти BP поінти за перемоги.",
            play_real_game: "Грати справжню гру",
            player_turn: "Хід гравця",
            enemy_turn: "Хід ворога"
        },
        game_info: {
            title: "Про гру NFT Battle Arena",
            subtitle: "Дізнайтесь все про механіку гри, правила та можливості заробітку",
            how_to_get_nft: "Як отримати NFT",
            game_rules: "Правила гри",
            roadmap: "Roadmap",
            faq: "FAQ"
        },
        common: {
            loading: "Завантаження...",
            error: "Помилка",
            success: "Успішно",
            close: "Закрити",
            save: "Зберегти",
            cancel: "Скасувати",
            confirm: "Підтвердити"
        }
    },
    en: {
        nav: {
            home: "Home",
            game_info: "Game Info",
            marketplace: "Marketplace",
            battle_demo: "Battle Demo",
            connect_telegram: "Connect Telegram"
        },
        hero: {
            title: "NFT Battle Arena",
            subtitle: "Play2Earn game in Telegram Mini App",
            description: "Get your first NFT, fight in arena against opponents and collect unique collection. This is not just a game – it's a battle for rewards, prestige and real power!",
            play_now: "Play Now",
            learn_more: "Learn More",
            watch_demo: "Watch Demo",
            start_journey: "Start Journey"
        },
        stats: {
            active_players: "Active Players",
            nft_in_game: "NFTs in Game",
            battles_fought: "Battles Fought",
            rewards_paid: "Rewards Paid"
        },
        features: {
            free_nft_title: "Free NFT",
            free_nft_desc: "Get your first fighter for free and start adventures in the arena",
            epic_battles_title: "Epic Battles",
            epic_battles_desc: "Fight against bots and other players for rewards and ranking",
            earn_bp_title: "Earn BP",
            earn_bp_desc: "Convert your BP points into real rewards through Telegram Stars",
            why_choose_title: "Why Choose NFT Battle Arena",
            why_choose_subtitle: "Unique combination of NFT collecting, dynamic battles and earning opportunities"
        },
        cta: {
            ready_title: "Ready to Start Adventure?",
            ready_subtitle: "Join thousands of players in NFT Battle Arena and start earning with us!",
            start_now: "Start Game Now",
            watch_demo: "Watch Battle Demo"
        },
        battle: {
            title: "Battle Demo",
            description: "See how battles look in NFT Battle Arena",
            player_hp: "Player HP",
            enemy_hp: "Enemy HP",
            attack: "Attack",
            defend: "Defend",
            special: "Special",
            fight: "FIGHT!",
            you_win: "YOU WIN!",
            you_lose: "YOU LOSE!",
            draw: "DRAW!",
            start: "Start",
            pause: "Pause",
            reset: "Reset",
            battle_log: "Battle Log",
            battle_not_started: "Battle hasn't started yet...",
            demo_info: "This is demo version",
            demo_description: "In the real game you can control all character actions, use different NFTs with unique abilities and earn BP points for victories.",
            play_real_game: "Play Real Game",
            player_turn: "Player Turn",
            enemy_turn: "Enemy Turn"
        },
        game_info: {
            title: "About NFT Battle Arena Game",
            subtitle: "Learn everything about game mechanics, rules and earning opportunities",
            how_to_get_nft: "How to Get NFT",
            game_rules: "Game Rules",
            roadmap: "Roadmap",
            faq: "FAQ"
        },
        common: {
            loading: "Loading...",
            error: "Error",
            success: "Success",
            close: "Close",
            save: "Save",
            cancel: "Cancel",
            confirm: "Confirm"
        }
    },
    pl: {
        nav: {
            home: "Główna",
            game_info: "O Grze",
            marketplace: "Sklep",
            battle_demo: "Demo Walki",
            connect_telegram: "Połącz Telegram"
        },
        hero: {
            title: "NFT Battle Arena",
            subtitle: "Gra Play2Earn w Telegram Mini App",
            description: "Zdobądź swój pierwszy NFT, walcz na arenie z przeciwnikami i zbieraj unikalną kolekcję. To nie tylko gra – to walka o nagrody, prestiż i prawdziwą siłę!",
            play_now: "Graj Teraz",
            learn_more: "Dowiedz Się Więcej",
            watch_demo: "Zobacz Demo",
            start_journey: "Rozpocznij Przygodę"
        },
        stats: {
            active_players: "Aktywni Gracze",
            nft_in_game: "NFT w Grze",
            battles_fought: "Stoczone Bitwy",
            rewards_paid: "Wypłacone Nagrody"
        },
        features: {
            free_nft_title: "Darmowe NFT",
            free_nft_desc: "Otrzymaj swojego pierwszego wojownika za darmo i rozpocznij przygody na arenie",
            epic_battles_title: "Epické Bitwy",
            epic_battles_desc: "Walcz przeciwko botom i innym graczom o nagrody i ranking",
            earn_bp_title: "Zarabiaj BP",
            earn_bp_desc: "Konwertuj swoje punkty BP na prawdziwe nagrody poprzez Telegram Stars",
            why_choose_title: "Dlaczego Wybierać NFT Battle Arena",
            why_choose_subtitle: "Unikalna kombinacja kolekcjonowania NFT, dynamicznych walk i możliwości zarabiania"
        },
        cta: {
            ready_title: "Gotowy Rozpocząć Przygodę?",
            ready_subtitle: "Dołącz do tysięcy graczy w NFT Battle Arena i zacznij zarabiać z nami!",
            start_now: "Rozpocznij Grę Teraz",
            watch_demo: "Zobacz Demo Walki"
        },
        battle: {
            title: "Demo Walki",
            description: "Zobacz jak wyglądają walki w NFT Battle Arena",
            player_hp: "HP Gracza",
            enemy_hp: "HP Wroga",
            attack: "Atak",
            defend: "Obrona",
            special: "Specjalny",
            fight: "WALKA!",
            you_win: "WYGRAŁEŚ!",
            you_lose: "PRZEGRAŁEŚ!",
            draw: "REMIS!",
            start: "Start",
            pause: "Pauza",
            reset: "Reset",
            battle_log: "Log Walki",
            battle_not_started: "Walka jeszcze się nie rozpoczęła...",
            demo_info: "To jest wersja demo",
            demo_description: "W prawdziwej grze możesz kontrolować wszystkie akcje postaci, używać różnych NFT z unikalnymi umiejętnościami i zarabiać punkty BP za zwycięstwa.",
            play_real_game: "Graj w Prawdziwą Grę",
            player_turn: "Tura Gracza",
            enemy_turn: "Tura Wroga"
        },
        game_info: {
            title: "O Grze NFT Battle Arena",
            subtitle: "Dowiedz się wszystkiego o mechanice gry, zasadach i możliwościach zarabiania",
            how_to_get_nft: "Jak Zdobyć NFT",
            game_rules: "Zasady Gry",
            roadmap: "Mapa Drogowa",
            faq: "FAQ"
        },
        common: {
            loading: "Ładowanie...",
            error: "Błąd",
            success: "Sukces",
            close: "Zamknij",
            save: "Zapisz",
            cancel: "Anuluj",
            confirm: "Potwierdź"
        }
    }
};

// Content templates
const pageContents = {
    home: `
        <div class="min-h-screen bg-black text-white">
            <!-- Hero Section -->
            <section class="relative pt-32 pb-20 overflow-hidden">
                <div class="container-glass">
                    <div class="grid lg:grid-cols-2 gap-12 items-center">
                        <!-- Left Content -->
                        <div class="text-center lg:text-left space-y-8">
                            <div class="inline-flex items-center space-x-2 px-4 py-2 glass-card">
                                <span>🌟</span>
                                <span class="text-blue-400 font-semibold tracking-wider uppercase text-sm">Play2Earn</span>
                                <span>🚀</span>
                            </div>
                            
                            <h1 class="text-display">
                                <span class="text-white" data-translate="hero.title">NFT Battle Arena</span>
                                <br />
                                <span style="color: var(--accent-primary);">Battle Arena</span>
                            </h1>
                            
                            <p class="text-body max-w-xl mx-auto lg:mx-0 text-lg" data-translate="hero.description">
                                Отримай свій перший NFT, бийся на арені з суперниками та збирай унікальну колекцію. Це не просто гра – це битва за нагороди, престиж і справжню силу!
                            </p>
                            
                            <div class="flex flex-col sm:flex-row gap-4 justify-center lg:justify-start">
                                <a href="https://t.me/NFTBattleArenaBot" target="_blank" class="glass-button-accent px-8 py-4 text-lg">
                                    ▶️ <span data-translate="hero.play_now">Грати зараз</span>
                                </a>
                                
                                <button onclick="showPage('game-info')" class="glass-button-primary px-8 py-4 text-lg">
                                    ℹ️ <span data-translate="hero.learn_more">Дізнатися більше</span>
                                </button>
                            </div>
                        </div>

                        <!-- Right Content - Hero Image -->
                        <div class="flex justify-center lg:justify-end">
                            <div class="relative">
                                <div class="absolute inset-0 bg-blue-500/20 blur-3xl rounded-full"></div>
                                <img src="https://i.ibb.co/3mQ3s9Mn/Photoroom-20250819-205326.png"
                                     alt="NFT Battle Character"
                                     class="relative z-10 w-full max-w-md lg:max-w-lg object-contain rounded-3xl scale-hover" />
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Game Stats -->
            <section class="section-glass">
                <div class="container-glass">
                    <div class="grid-glass grid-glass-4">
                        <div class="glass-card p-6 text-center">
                            <div class="flex justify-center items-center mb-4" style="color: var(--accent-primary);">🎮</div>
                            <div class="text-title text-white mb-2">12,847</div>
                            <div class="text-caption" data-translate="stats.active_players">Активних гравців</div>
                        </div>
                        <div class="glass-card p-6 text-center">
                            <div class="flex justify-center items-center mb-4" style="color: #facc15;">⭐</div>
                            <div class="text-title text-white mb-2">3,420</div>
                            <div class="text-caption" data-translate="stats.nft_in_game">NFT у грі</div>
                        </div>
                        <div class="glass-card p-6 text-center">
                            <div class="flex justify-center items-center mb-4" style="color: var(--accent-secondary);">🏆</div>
                            <div class="text-title text-white mb-2">89,234</div>
                            <div class="text-caption" data-translate="stats.battles_fought">Боїв проведено</div>
                        </div>
                        <div class="glass-card p-6 text-center">
                            <div class="flex justify-center items-center mb-4" style="color: #c084fc;">⚡</div>
                            <div class="text-title text-white mb-2">₴45,890</div>
                            <div class="text-caption" data-translate="stats.rewards_paid">Нагород виплачено</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Features Section -->
            <section class="section-glass">
                <div class="container-glass">
                    <div class="text-center mb-16 space-y-4">
                        <h2 class="text-title" data-translate="features.why_choose_title">
                            Чому обирають NFT Battle Arena
                        </h2>
                        <p class="text-body max-w-3xl mx-auto" data-translate="features.why_choose_subtitle">
                            Унікальна комбінація NFT колекціонування, динамічних боїв та можливостей заробітку
                        </p>
                    </div>
                    
                    <div class="grid-glass grid-glass-3">
                        <div class="glass-card p-6 text-center scale-hover">
                            <div class="space-y-4">
                                <div class="flex justify-center">
                                    <div class="w-12 h-12 rounded-2xl bg-green-500/20 flex items-center justify-center">
                                        🎁
                                    </div>
                                </div>
                                <h3 class="text-headline" data-translate="features.free_nft_title">Безкоштовний NFT</h3>
                                <p class="text-body" data-translate="features.free_nft_desc">
                                    Отримай свого першого бійця безкоштовно та почни пригоди в арені
                                </p>
                            </div>
                        </div>
                        
                        <div class="glass-card p-6 text-center scale-hover">
                            <div class="space-y-4">
                                <div class="flex justify-center">
                                    <div class="w-12 h-12 rounded-2xl bg-red-500/20 flex items-center justify-center">
                                        ⚔️
                                    </div>
                                </div>
                                <h3 class="text-headline" data-translate="features.epic_battles_title">Епічні бої</h3>
                                <p class="text-body" data-translate="features.epic_battles_desc">
                                    Бийся проти ботів та інших гравців за нагороди та рейтинг
                                </p>
                            </div>
                        </div>
                        
                        <div class="glass-card p-6 text-center scale-hover">
                            <div class="space-y-4">
                                <div class="flex justify-center">
                                    <div class="w-12 h-12 rounded-2xl bg-blue-500/20 flex items-center justify-center">
                                        💰
                                    </div>
                                </div>
                                <h3 class="text-headline" data-translate="features.earn_bp_title">Заробляй BP</h3>
                                <p class="text-body" data-translate="features.earn_bp_desc">
                                    Конвертуй свої BP поінти в реальні нагороди через Telegram Stars
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- CTA Section -->
            <section class="section-glass">
                <div class="container-glass">
                    <div class="glass-card-strong text-center p-12">
                        <div class="space-y-6">
                            <h2 class="text-title">
                                <span data-translate="cta.ready_title">Готовий почати пригоду?</span> 🚀
                            </h2>
                            <p class="text-body max-w-2xl mx-auto" data-translate="cta.ready_subtitle">
                                Приєднуйся до тисяч гравців у NFT Battle Arena та почни заробляти разом з нами!
                            </p>
                            
                            <div class="flex flex-col sm:flex-row gap-4 justify-center pt-4">
                                <a href="https://t.me/NFTBattleArenaBot" target="_blank" class="glass-button-accent px-12 py-4 text-lg">
                                    👥 <span data-translate="cta.start_now">Почати гру зараз</span>
                                </a>
                                
                                <button onclick="showPage('battle-demo')" class="glass-button-primary px-8 py-4 text-lg">
                                    👁️ <span data-translate="cta.watch_demo">Дивитись демо бою</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    `,
    
    'game-info': `
        <div class="min-h-screen bg-black text-white pt-32 pb-16">
            <div class="container-glass">
                <!-- Header -->
                <div class="text-center mb-12 space-y-6">
                    <h1 class="text-display">
                        <span data-translate="game_info.title">Про гру NFT Battle Arena</span> 📖
                    </h1>
                    <p class="text-body text-lg max-w-3xl mx-auto" data-translate="game_info.subtitle">
                        Дізнайтесь все про механіку гри, правила та можливості заробітку
                    </p>
                </div>

                <!-- Main Content -->
                <div class="tabs-container">
                    <div class="tabs-list">
                        <button class="tab-trigger active" onclick="showTab('how-to-get')">
                            🎁 <span class="hidden sm:inline">NFT</span>
                        </button>
                        <button class="tab-trigger" onclick="showTab('rules')">
                            ⚔️ <span class="hidden sm:inline">Правила</span>
                        </button>
                        <button class="tab-trigger" onclick="showTab('roadmap')">
                            📅 <span class="hidden sm:inline">Roadmap</span>
                        </button>
                        <button class="tab-trigger" onclick="showTab('faq')">
                            ❓ <span class="hidden sm:inline">FAQ</span>
                        </button>
                    </div>

                    <div id="how-to-get" class="tab-content active space-y-8">
                        <div class="text-center space-y-4">
                            <h2 class="text-title">Як отримати NFT 🎁</h2>
                            <p class="text-body max-w-2xl mx-auto">
                                Дізнайтесь усі способи отримання унікальних NFT-бійців та аксесуарів у NFT Battle Arena
                            </p>
                        </div>
                        
                        <div class="grid-glass grid-glass-3">
                            <div class="glass-card scale-hover p-6 text-center">
                                <div class="space-y-4">
                                    <div class="flex justify-center">
                                        <div class="w-16 h-16 rounded-2xl bg-green-500/20 flex items-center justify-center text-4xl">
                                            🎁
                                        </div>
                                    </div>
                                    <h3 class="text-headline flex items-center justify-center gap-2">
                                        🎁 Безкоштовний стартовий NFT
                                    </h3>
                                    <p class="text-body">
                                        Кожен новий гравець отримує свого першого NFT-бійця абсолютно безкоштовно через Airdrop систему.
                                    </p>
                                </div>
                            </div>
                            
                            <div class="glass-card scale-hover p-6 text-center">
                                <div class="space-y-4">
                                    <div class="flex justify-center">
                                        <div class="w-16 h-16 rounded-2xl bg-blue-500/20 flex items-center justify-center text-4xl">
                                            ⭐
                                        </div>
                                    </div>
                                    <h3 class="text-headline flex items-center justify-center gap-2">
                                        ⭐ Покупка за Telegram Stars
                                    </h3>
                                    <p class="text-body">
                                        Додаткові унікальні NFT та аксесуари можна придбати за Telegram Stars у внутрішньому магазині.
                                    </p>
                                </div>
                            </div>
                            
                            <div class="glass-card scale-hover p-6 text-center">
                                <div class="space-y-4">
                                    <div class="flex justify-center">
                                        <div class="w-16 h-16 rounded-2xl bg-yellow-500/20 flex items-center justify-center text-4xl">
                                            🏆
                                        </div>
                                    </div>
                                    <h3 class="text-headline flex items-center justify-center gap-2">
                                        🏆 Нагороди за досягнення
                                    </h3>
                                    <p class="text-body">
                                        Отримуйте рідкісні NFT за участь у турнірах, досягнення високих рейтингів та виконання спеціальних завдань.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Other tab contents would be added here -->
                    <div id="rules" class="tab-content space-y-8">
                        <div class="text-center space-y-4">
                            <h2 class="text-title">Правила гри 📜</h2>
                            <p class="text-body max-w-2xl mx-auto">
                                Ознайомтесь з основними правилами та механікою гри для успішного старту
                            </p>
                        </div>
                        
                        <div class="space-y-6">
                            <div class="glass-card p-6">
                                <h3 class="text-headline flex items-center gap-3 mb-4">
                                    🚀 Початок гри і перший NFT
                                </h3>
                                <ul class="space-y-3">
                                    <li class="flex items-start gap-3 text-body">
                                        <div class="w-2 h-2 bg-blue-400 rounded-full mt-2 flex-shrink-0"></div>
                                        <span>При першому вході гравець отримує безкоштовного базового NFT-бійця</span>
                                    </li>
                                    <li class="flex items-start gap-3 text-body">
                                        <div class="w-2 h-2 bg-blue-400 rounded-full mt-2 flex-shrink-0"></div>
                                        <span>Цей воїн потрібен для початкових боїв проти бота та отримання перших BP-поінтів</span>
                                    </li>
                                    <li class="flex items-start gap-3 text-body">
                                        <div class="w-2 h-2 bg-blue-400 rounded-full mt-2 flex-shrink-0"></div>
                                        <span>Стартовий NFT має базові характеристики, які можна покращити</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div id="roadmap" class="tab-content space-y-8">
                        <div class="text-center space-y-4">
                            <h2 class="text-title">Roadmap розвитку 🗺️</h2>
                            <p class="text-body max-w-2xl mx-auto">
                                Плани розвитку NFT Battle Arena на найближчі роки
                            </p>
                        </div>
                    </div>

                    <div id="faq" class="tab-content space-y-8">
                        <div class="text-center space-y-4">
                            <h2 class="text-title">Часті питання ❓</h2>
                            <p class="text-body max-w-2xl mx-auto">
                                Відповіді на найпоширеніші запитання про NFT Battle Arena
                            </p>
                        </div>
                        
                        <div class="space-y-4">
                            <div class="glass-card scale-hover p-6">
                                <h3 class="text-headline flex items-start gap-2 mb-4">
                                    ❓ Що таке NFT Battle Arena?
                                </h3>
                                <p class="text-body leading-relaxed">
                                    NFT Battle Arena – це інноваційна Play2Earn гра у форматі Telegram Mini App. Кожен гравець отримує безкоштовного NFT-бійця, щоб розпочати битви на арені та збирати унікальну колекцію.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- CTA -->
                <div class="text-center mt-16">
                    <div class="glass-card-strong p-8">
                        <div class="space-y-6">
                            <h3 class="text-title">
                                Готові спробувати NFT Battle Arena? 🚀
                            </h3>
                            <p class="text-body max-w-xl mx-auto">
                                Приєднуйтесь до тисяч гравців та почніть свою пригоду в світі NFT боїв прямо зараз!
                            </p>
                            <div class="flex flex-col sm:flex-row gap-4 justify-center">
                                <a href="https://t.me/NFTBattleArenaBot" target="_blank" class="glass-button-accent">
                                    👥 Почати гру
                                </a>
                                <button onclick="showPage('battle-demo')" class="glass-button-primary">
                                    ⚡ Демо бою
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    `,
    
    'battle-demo': `
        <div class="min-h-screen bg-black text-white pt-32 pb-16">
            <div class="container-glass">
                <!-- Header -->
                <div class="text-center mb-12 space-y-6">
                    <h1 class="text-display">
                        <span data-translate="battle.title">Демо бою</span> ⚔️
                    </h1>
                    <p class="text-body text-lg max-w-2xl mx-auto" data-translate="battle.description">
                        Подивіться, як виглядає бій в NFT Battle Arena
                    </p>
                    
                    <div class="flex justify-center gap-4">
                        <button id="battle-play-btn" onclick="toggleBattle()" class="glass-button-accent px-6 py-3">
                            ▶️ <span data-translate="battle.start">Почати</span>
                        </button>
                        
                        <button onclick="resetBattle()" class="glass-button-primary px-6 py-3">
                            🔄 <span data-translate="battle.reset">Скинути</span>
                        </button>
                    </div>
                </div>

                <!-- Battle Arena -->
                <div class="max-w-4xl mx-auto space-y-6">
                    <!-- Battle UI -->
                    <div class="glass-card-strong p-8 battle-arena" id="battle-arena">
                        <!-- HP Bars -->
                        <div class="hp-bar-container">
                            <!-- Player HP -->
                            <div class="hp-section">
                                <div class="hp-info">
                                    <span class="text-caption font-semibold" data-translate="battle.player_hp">HP Гравця</span>
                                    <span class="text-caption"><span id="player-hp">2000</span>/2000</span>
                                </div>
                                <div class="hp-bar">
                                    <div id="player-hp-fill" class="hp-fill" style="width: 100%;"></div>
                                </div>
                                <div class="energy-bar">
                                    <div id="player-energy-fill" class="energy-fill" style="width: 0%;"></div>
                                </div>
                            </div>

                            <!-- Turn Indicator -->
                            <div class="turn-indicator">
                                <div class="turn-icon" id="turn-icon">👤</div>
                                <div class="text-caption" id="turn-text" data-translate="battle.player_turn">Хід гравця</div>
                            </div>

                            <!-- Enemy HP -->
                            <div class="hp-section">
                                <div class="hp-info" style="flex-direction: row-reverse;">
                                    <span class="text-caption font-semibold" data-translate="battle.enemy_hp">HP Ворога</span>
                                    <span class="text-caption"><span id="enemy-hp">2400</span>/2400</span>
                                </div>
                                <div class="hp-bar">
                                    <div id="enemy-hp-fill" class="hp-fill" style="width: 100%; background: linear-gradient(to left, #ef4444, #22c55e);"></div>
                                </div>
                                <div class="energy-bar">
                                    <div id="enemy-energy-fill" class="energy-fill" style="width: 0%; margin-left: auto;"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Characters -->
                        <div class="characters-container">
                            <div class="character active" id="player-character">
                                <div class="character-avatar player-avatar">🦸‍♂️</div>
                                <div class="text-center text-caption">Player</div>
                            </div>

                            <div class="vs-indicator">
                                <div class="vs-icon">⚡</div>
                                <div class="text-headline" style="color: var(--accent-primary);">VS</div>
                            </div>

                            <div class="character" id="enemy-character">
                                <div class="character-avatar enemy-avatar">👹</div>
                                <div class="text-center text-caption">Enemy</div>
                            </div>
                        </div>

                        <!-- Game Result -->
                        <div id="battle-result" class="battle-result" style="display: none;">
                            <div class="text-center space-y-6">
                                <div class="text-6xl" id="result-icon">🏆</div>
                                <div class="text-title" style="color: var(--accent-primary);" id="result-text">ВИ ПЕРЕМОГЛИ!</div>
                                <button onclick="resetBattle()" class="glass-button-accent">
                                    Грати знову
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Battle Log -->
                    <div class="glass-card">
                        <div class="p-6">
                            <h3 class="text-headline flex items-center mb-4">
                                ℹ️ <span data-translate="battle.battle_log">Лог бою</span>
                            </h3>
                            <div class="battle-log" id="battle-log">
                                <p class="text-body text-center opacity-60" data-translate="battle.battle_not_started">
                                    Бій ще не почався...
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Demo Info -->
                    <div class="glass-card text-center">
                        <div class="p-8 space-y-6">
                            <div class="flex items-center justify-center">
                                <span class="text-headline">ℹ️ <span data-translate="battle.demo_info">Це демо версія</span></span>
                            </div>
                            <p class="text-body" data-translate="battle.demo_description">
                                У справжній грі ви зможете контролювати всі дії персонажа, використовувати різні NFT з унікальними здібностями та заробляти BP поінти за перемоги.
                            </p>
                            <a href="https://t.me/NFTBattleArenaBot" target="_blank" class="glass-button-accent">
                                ▶️ <span data-translate="battle.play_real_game">Грати справжню гру</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    `
};

// Initialize app when DOM loaded
document.addEventListener('DOMContentLoaded', function() {
    initializeApp();
});

// Initialize application
function initializeApp() {
    loadPageContent('home');
    updateLanguage();
    updateSEO();
    initializeScrollHandler();
}

// Load page content dynamically
function loadPageContent(pageId) {
    const pageElement = document.getElementById(pageId);
    if (pageElement && pageContents[pageId]) {
        pageElement.innerHTML = pageContents[pageId];
    }
}

// Language functions
function changeLanguage(lang) {
    currentLang = lang;
    document.documentElement.lang = lang;
    document.getElementById('current-lang').textContent = lang.toUpperCase();
    updateLanguage();
    updateSEO();
    toggleLanguageDropdown();
}

function toggleLanguageDropdown() {
    const dropdown = document.getElementById('language-dropdown');
    dropdown.classList.toggle('open');
}

function updateLanguage() {
    const elements = document.querySelectorAll('[data-translate]');
    elements.forEach(element => {
        const key = element.getAttribute('data-translate');
        const translation = getNestedTranslation(translations[currentLang], key);
        if (translation) {
            element.textContent = translation;
        }
    });
}

function getNestedTranslation(obj, path) {
    return path.split('.').reduce((o, i) => o ? o[i] : null, obj);
}

// SEO functions
function updateSEO() {
    const t = translations[currentLang] || translations.ua;
    
    document.title = `NFT Battle Arena - ${t.hero?.subtitle || 'Play2Earn гра в Telegram'}`;
    
    const description = t.hero?.description || 'Отримай свій перший NFT, бийся на арені з суперниками та збирай унікальну колекцію. Це не просто гра – це битва за нагороди, престиж і справжню силу!';
    
    let metaDesc = document.querySelector('meta[name="description"]');
    if (metaDesc) {
        metaDesc.content = description;
    }
}

// Navigation functions
function showPage(pageId) {
    // Hide all pages
    document.querySelectorAll('.page').forEach(page => {
        page.classList.remove('active');
    });
    
    // Load and show selected page
    loadPageContent(pageId);
    document.getElementById(pageId).classList.add('active');
    
    // Update navigation
    document.querySelectorAll('.nav-item').forEach(item => {
        item.classList.remove('active');
    });
    
    document.querySelectorAll(`[data-page="${pageId}"]`).forEach(item => {
        item.classList.add('active');
    });
    
    currentPage = pageId;
    updateLanguage(); // Update translations for new content
    window.scrollTo(0, 0);
}

function toggleMobileMenu() {
    const mobileMenu = document.getElementById('mobile-menu');
    mobileMenu.classList.toggle('open');
}

function initializeScrollHandler() {
    window.addEventListener('scroll', function() {
        const nav = document.getElementById('navigation');
        if (window.scrollY > 20) {
            nav.classList.add('scrolled');
        } else {
            nav.classList.remove('scrolled');
        }
    });
}

// Tab functions
function showTab(tabId) {
    // Hide all tab contents
    document.querySelectorAll('.tab-content').forEach(content => {
        content.classList.remove('active');
    });
    
    // Show selected tab content
    const tabContent = document.getElementById(tabId);
    if (tabContent) {
        tabContent.classList.add('active');
    }
    
    // Update tab triggers
    document.querySelectorAll('.tab-trigger').forEach(trigger => {
        trigger.classList.remove('active');
    });
    
    if (event && event.target) {
        event.target.classList.add('active');
    }
}

// Battle game functions
function toggleBattle() {
    isPlaying = !isPlaying;
    const button = document.getElementById('battle-play-btn');
    const t = translations[currentLang]?.battle || translations.ua.battle;
    
    if (isPlaying) {
        button.innerHTML = `⏸️ <span>${t.pause || 'Пауза'}</span>`;
        startBattle();
    } else {
        button.innerHTML = `▶️ <span>${t.start || 'Почати'}</span>`;
        pauseBattle();
    }
}

function startBattle() {
    if (gameResult) return;
    
    battleInterval = setInterval(() => {
        simulateBattleTurn();
    }, 1500);
}

function pauseBattle() {
    if (battleInterval) {
        clearInterval(battleInterval);
        battleInterval = null;
    }
}

function resetBattle() {
    pauseBattle();
    
    playerHP = MAX_PLAYER_HP;
    enemyHP = MAX_ENEMY_HP;
    playerEnergy = 0;
    enemyEnergy = 0;
    isPlaying = false;
    battleLog = [];
    currentTurn = 'player';
    gameResult = null;
    
    updateBattleUI();
    
    const battleLogElement = document.getElementById('battle-log');
    if (battleLogElement) {
        battleLogElement.innerHTML = `
            <p class="text-body text-center opacity-60">${translations[currentLang]?.battle?.battle_not_started || "Бій ще не почався..."}</p>
        `;
    }
    
    const battleResult = document.getElementById('battle-result');
    if (battleResult) {
        battleResult.style.display = 'none';
    }
    
    const button = document.getElementById('battle-play-btn');
    if (button) {
        const t = translations[currentLang]?.battle || translations.ua.battle;
        button.innerHTML = `▶️ <span>${t.start || 'Почати'}</span>`;
        button.disabled = false;
    }
}

function simulateBattleTurn() {
    if (gameResult) return;
    
    const actions = ['attack', 'attack', 'special', 'defend'];
    const randomAction = actions[Math.floor(Math.random() * actions.length)];
    
    if (currentTurn === 'player') {
        performAction('player', randomAction);
        currentTurn = 'enemy';
    } else {
        performAction('enemy', randomAction);
        currentTurn = 'player';
    }
    
    updateBattleUI();
    checkGameEnd();
}

function performAction(actor, action) {
    const damage = Math.floor(Math.random() * 50) + 20;
    const energyGain = Math.floor(Math.random() * 15) + 5;
    const t = translations[currentLang]?.battle || translations.ua.battle;
    
    if (actor === 'player') {
        if (action === 'attack') {
            enemyHP = Math.max(0, enemyHP - damage);
            playerEnergy = Math.min(100, playerEnergy + energyGain);
            addToBattleLog(`⚔️ ${t.player_turn || 'Гравець'} атакує на ${damage} пошкоджень!`);
        } else if (action === 'special' && playerEnergy >= 100) {
            const specialDamage = damage * 2;
            enemyHP = Math.max(0, enemyHP - specialDamage);
            playerEnergy = 0;
            addToBattleLog(`✨ ${t.player_turn || 'Гравець'} використовує спеціальну атаку на ${specialDamage} пошкоджень!`);
        } else if (action === 'defend') {
            addToBattleLog(`🛡️ ${t.player_turn || 'Гравець'} захищається!`);
        }
    } else {
        if (action === 'attack') {
            playerHP = Math.max(0, playerHP - damage);
            enemyEnergy = Math.min(100, enemyEnergy + energyGain);
            addToBattleLog(`👹 ${t.enemy_turn || 'Ворог'} атакує на ${damage} пошкоджень!`);
        } else if (action === 'special' && enemyEnergy >= 100) {
            const specialDamage = damage * 2;
            playerHP = Math.max(0, playerHP - specialDamage);
            enemyEnergy = 0;
            addToBattleLog(`💥 ${t.enemy_turn || 'Ворог'} використовує спеціальну атаку на ${specialDamage} пошкоджень!`);
        }
    }
}

function addToBattleLog(message) {
    battleLog.push(message);
    if (battleLog.length > 5) {
        battleLog.shift();
    }
    
    const logContainer = document.getElementById('battle-log');
    if (logContainer) {
        logContainer.innerHTML = battleLog.map(log => 
            `<div class="log-entry">${log}</div>`
        ).join('');
        logContainer.scrollTop = logContainer.scrollHeight;
    }
}

function updateBattleUI() {
    // Update HP displays
    const playerHpElement = document.getElementById('player-hp');
    const enemyHpElement = document.getElementById('enemy-hp');
    if (playerHpElement) playerHpElement.textContent = playerHP;
    if (enemyHpElement) enemyHpElement.textContent = enemyHP;
    
    // Update HP bars
    const playerHpFill = document.getElementById('player-hp-fill');
    const enemyHpFill = document.getElementById('enemy-hp-fill');
    if (playerHpFill) playerHpFill.style.width = `${(playerHP / MAX_PLAYER_HP) * 100}%`;
    if (enemyHpFill) enemyHpFill.style.width = `${(enemyHP / MAX_ENEMY_HP) * 100}%`;
    
    // Update energy bars
    const playerEnergyFill = document.getElementById('player-energy-fill');
    const enemyEnergyFill = document.getElementById('enemy-energy-fill');
    if (playerEnergyFill) playerEnergyFill.style.width = `${playerEnergy}%`;
    if (enemyEnergyFill) enemyEnergyFill.style.width = `${enemyEnergy}%`;
    
    // Update turn indicator
    const t = translations[currentLang]?.battle || translations.ua.battle;
    const turnIcon = document.getElementById('turn-icon');
    const turnText = document.getElementById('turn-text');
    if (turnIcon) turnIcon.textContent = currentTurn === 'player' ? '👤' : '👹';
    if (turnText) turnText.textContent = currentTurn === 'player' ? 
        (t.player_turn || 'Хід гравця') : (t.enemy_turn || 'Хід ворога');
    
    // Update character states
    const playerCharacter = document.getElementById('player-character');
    const enemyCharacter = document.getElementById('enemy-character');
    if (playerCharacter) playerCharacter.classList.toggle('active', currentTurn === 'player');
    if (enemyCharacter) enemyCharacter.classList.toggle('active', currentTurn === 'enemy');
}

function checkGameEnd() {
    const t = translations[currentLang]?.battle || translations.ua.battle;
    
    if (playerHP <= 0) {
        gameResult = 'lose';
        isPlaying = false;
        pauseBattle();
        addToBattleLog(`💀 ${t.you_lose || 'ВИ ПРОГРАЛИ!'}`);
        showGameResult('💀', t.you_lose || 'ВИ ПРОГРАЛИ!');
    } else if (enemyHP <= 0) {
        gameResult = 'win';
        isPlaying = false;
        pauseBattle();
        addToBattleLog(`🏆 ${t.you_win || 'ВИ ПЕРЕМОГЛИ!'}`);
        showGameResult('🏆', t.you_win || 'ВИ ПЕРЕМОГЛИ!');
    }
}

function showGameResult(icon, text) {
    const resultIcon = document.getElementById('result-icon');
    const resultText = document.getElementById('result-text');
    const battleResult = document.getElementById('battle-result');
    const playButton = document.getElementById('battle-play-btn');
    
    if (resultIcon) resultIcon.textContent = icon;
    if (resultText) resultText.textContent = text;
    if (battleResult) battleResult.style.display = 'flex';
    if (playButton) playButton.disabled = true;
}

// Close dropdowns when clicking outside
document.addEventListener('click', function(event) {
    const languageDropdown = document.getElementById('language-dropdown');
    const languageSwitcher = document.querySelector('.language-switcher');
    
    if (languageSwitcher && !languageSwitcher.contains(event.target)) {
        languageDropdown.classList.remove('open');
    }
    
    const mobileMenu = document.getElementById('mobile-menu');
    const mobileToggle = document.querySelector('.mobile-menu-toggle');
    
    if (mobileToggle && !mobileToggle.contains(event.target) && mobileMenu && !mobileMenu.contains(event.target)) {
        mobileMenu.classList.remove('open');
    }
});    </script>
</body>
</html>
